
<% content_for :page_title, @post.title %>
                  
<section class="section">
    <div class="container">
        <nav class="level">
          <!-- Left side -->
          <div class="level-left">
            <p class="level-item">
                <strong>Actions</strong>
            </p>
          </div>
          <!-- Right side -->
          <div class="level-right">
              <p class="level-item">
                <%= link_to "Edit", edit_post_path(@post), class:"btn btn-success" %>
                <%= link_to 'back',posts_path ,class:"btn btn-dark"%>
              </p>
          </div>
        </nav>
        <hr/>

        <div class="content">
            <%= @post.content %>
        </div>
    </div>
</section>

<section class="section comments">
    <div class="container">
        <h2 class="subtitle is-5"><strong><%= @post.comments.count %></strong> Comments</h2>
        <%= render @post.comments %>

        
        <p><%= @post.likes.count %> <%= (@post.likes.count) == 1 ? 'Like' : 'Likes'%></p>

        <% pre_like = @post.likes.find { |like| like.user_id == current_user.id} %>
        <% if pre_like %>
          <%= button_to 'Unlike', post_like_path(@post, pre_like), method: :delete, class:"btn btn-danger" %>
        <% else %>
          <%= button_to 'Like', post_likes_path(@post), method: :post , class:"btn btn-primary"%>
        <% end %>

        <div class="comment-form">
            <hr />
            <h3 class="subtitle is-3">Leave a reply</h3>
             <%#= render 'comments/form' %>
             <%= simple_form_for([@post, @post.comments.build]) do |f| %>

            <div class="field">
              <div class="control">
                <%= f.input :name, input_html: { class: 'input' }, wrapper: false, label_html: { class: 'label' } %>
              </div>
            </div>

            <div class="field">
              <div class="control">
                <%= f.input :comment, input_html: { class: 'textarea' }, wrapper: false, label_html: { class: 'label' }  %>
              </div>
            </div>
            <%= f.button :submit, 'Leave a reply', class: "btn btn-primary"%>
            <% end %>

        </div>
    </div>
</section>